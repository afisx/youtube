!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=2)}([function(t,e,s){},function(t,e,s){},function(t,e,s){"use strict";s.r(e);class i{constructor(t,e,s){this.model=t,this.viewModel=e,this.view=s}setActions(){const{wrapper:t,list:e,pagination:s}=this.view,{current:n,start:o,previos:a,next:r}=s,l=a.find(".tooltip-previos"),c=r.find(".tooltip-next");let p=this.view.getRoot().clientWidth,d=0,h=1;n.html(h),c.html(h+1),t.on("pointerdown",s=>{e.addClass("active");const o=e.get(0).scrollWidth,r=s.clientX,u=r-d;window.console.log(d),t.on("pointermove",t=>{e.css({left:`${t.clientX-u}px`})}),t.on("pointerup",s=>{i.doDefault(s),e.removeClass("active"),t.off("pointermove").off("pointerup"),s.clientX-r!=0&&(s.clientX-r>0?(d=d+p>0?0:d+p,e.css({left:`${d}px`}),h=i.setPagePosition(l,c,n,a,h,!0)):(e.css({left:`${d-=p}px`}),h=i.setPagePosition(l,c,n,a,h,!1)),o<=3*p-d&&this.loadNextItems())})}).on("dragstart",t=>{i.doDefault(t)}),n.on("pointerdown",t=>{i.doDefault(t)}),o.on("pointerdown",t=>{i.doDefault(t),e.css({left:`${d=0}px`}),h=i.setPagePosition(l,c,n,a,1,!0),e.css({left:0}),n.html(h=1)}),a.on("pointerdown",t=>{i.doDefault(t),e.css({left:`${d+=p}px`}),h=i.setPagePosition(l,c,n,a,h,!0)}),r.on("pointerdown",t=>{i.doDefault(t),e.css({left:`${d-=p}px`});const s=e.get(0).scrollWidth;h=i.setPagePosition(l,c,n,a,h,!1),s<=3*p-d&&this.loadNextItems()}),window.addEventListener("resize",()=>{if(0!==d){const t=d,s=p;window.console.log(p);const i=t/p;p=this.view.getRoot().clientWidth,window.console.log(p);let o=(i*(s/p)).toFixed(0);d=(o=s>p?+o-1:+o+1)*p,window.console.log("num",o),e.css({left:`${d}px`}),h=-(+o-1),n.html(h),l.html(h-1),c.html(h+1)}})}loadNextItems(){this.model.getNextItems().then(t=>{window.console.log(t),this.view.render(this.viewModel.prepareData(t))}).catch(t=>{window.console.log(t)})}static setPagePosition(t,e,s,i,n,o){let a=n;return o?(a=1===a?a:a-1,s.html(a)):s.html(a+=1),t.html(a-1),e.html(a+1),a>2?i.removeClass("not-active"):i.addClass("not-active"),a}static doDefault(t){t.preventDefault(),t.stopPropagation()}search(){this.view.form.on("submit",t=>{i.doDefault(t),this.model.getItems(this.view.search.value()).then(t=>{this.view.render(this.viewModel.prepareData(t)),this.view.addPagination(),this.setActions()}).catch(t=>{window.console.log(t)})}),this.view.form.on("mousedown",t=>{t.stopPropagation()})}start(){this.view.render(),this.search()}}class n{constructor(t){this.url="https://www.googleapis.com/youtube/v3/",this.key=t,this.pagination={nextToken:"",prevToken:""},this.options={type:"video",part:"snippet",maxResults:"15",q:""}}getRequestString(t,e){let s=`${this.url+t}?key=${this.key}`;return Object.keys(e).forEach(t=>{s+=`&${t}=${e[t]}`}),s}getItems(t){const e={type:"video",part:"snippet",maxResults:"15",q:t};return new Promise((t,s)=>{fetch(this.getRequestString("search",e)).then(t=>t.json()).then(i=>{const{items:o}=i;window.console.log(i),this.pagination.nextToken=i.nextPageToken,this.getItemsStatistics(n.getItemsIds(o)).then(s=>{this.options=e,t({videos:o,statistics:s.items})}).catch(t=>s(t))}).catch(t=>s(t))})}getItemsStatistics(t){const e={id:t,part:"snippet, statistics"};return new Promise((t,s)=>{fetch(this.getRequestString("videos",e)).then(t=>t.json()).then(e=>t(e)).catch(t=>s(t))})}static getItemsIds(t){return window.console.log(t),t.map(t=>t.id.videoId)}search(t){return this.options.q=t,this.getItems()}getNextItems(){const t=`${this.getRequestString("search",this.options)}&pageToken=${this.pagination.nextToken}`;return window.console.log(t),new Promise((e,s)=>{fetch(t).then(t=>t.json()).then(t=>{const{items:i}=t;this.pagination.nextToken=t.nextPageToken,this.getItemsStatistics(n.getItemsIds(i)).then(t=>{e({videos:i,statistics:t.items})}).catch(t=>s(t))}).catch(t=>s(t))})}}class o{constructor(t){this.data=t}getData(){return this.data}prepareData(t){return this.data=t,window.console.log(t),t.videos.map((e,s)=>{window.console.log(e),window.console.log(s);const{id:i,snippet:n}=e,{publishedAt:o,channelId:a,channelTitle:r,title:l,description:c,thumbnails:p}=n,{viewCount:d,likeCount:h,dislikeCount:u}=t.statistics[s].statistics;return{videoId:i.videoId,videoTitle:l,owner:r,ownerId:a,videoDescription:c,uploaded:o.split("").slice(0,10).join(""),views:d,likes:h,dislikes:u,thumbnailUrl:p.default.url,thumbnailSize:{width:p.default.width,height:p.default.height}}})}}function a(t,e={},s=document){let i,n=[];const o={};return"object"==typeof t?n=[].slice.call(t):"<"===t[0]&&">"===t[t.length-1]?(i=s.createElement(t.split("").slice(1,t.length-1).join("")),e&&"object"==typeof e&&Object.keys(e).length>0&&Object.keys(e).forEach(t=>{i.setAttribute(t.toString(),`${e[t]}`)}),n.push(i)):(i=s.querySelectorAll(t),n=[].slice.call(i)),{elements:n,get(t){return t>=0?this.elements[t]:this.elements},html(t){return this.elements.forEach(e=>{e.innerHTML=t}),this},addClass(t){return this.elements.forEach(e=>{e.classList.add(t)}),this},removeClass(t){return this.elements.forEach(e=>{e.classList.remove(t)}),this},find:t=>a(t),append(t){return this.elements.forEach(e=>{t.elements.forEach(t=>{e.appendChild(t)})}),this},value(){return this.elements[0].value},css(t,e){if("string"==typeof t){if(!e)return window.getComputedStyle(this.elements[0]).getPropertyValue(t);this.elements.forEach(s=>{s.setAttribute("style",`${t}:${e}`)})}else{if("object"!=typeof t||e)throw new Error("invalid parameters");this.elements.forEach(e=>{Object.keys(t).forEach(s=>{e.setAttribute("style",`${s}:${t[s]}`)})})}return this},on(t,e){return this.elements.forEach(s=>{o[t]=e,s.addEventListener(t,e)}),this},off(t){return this.elements.forEach(e=>{const s=o[t];e.removeEventListener(t,s),delete o[t]}),this}}}s(0),s(1);class r{constructor(t){let e;"string"==typeof t?e=a(t):[e]=t,this.wrapper=a("<div>",{class:"wrapper"}),this.form=a("<form>",{class:"search-form",name:"search"}),this.search=a("<input>",{class:"search-text",type:"text",name:"search-input"}),this.list=a("<ul>",{class:"search-list-container"}),this.submit=a("<button>",{class:"fa fa-search submit-button",type:"submit",value:""}),this.pagination={start:a("<li>",{class:"pagination-item pagination-start"}).append(a("<i>",{class:"fa fa-angle-double-left"})).append(a("<a>",{class:"pagination-link link-start",href:"#1"}).append(a("<span>",{class:"pagination-tooltip tooltip-start"}).html("1"))),previos:a("<li>",{class:"pagination-item pagination-previos not-active"}).append(a("<i>",{class:"fa fa-angle-left"})).append(a("<a>",{class:"pagination-link link-previos",href:"#previos"}).append(a("<span>",{class:"pagination-tooltip tooltip-previos"}))),current:a("<li>",{class:"pagination-item pagination-current"}),next:a("<li>",{class:"pagination-item pagination-next"}).append(a("<i>",{class:"fa fa-angle-right"})).append(a("<a>",{class:"pagination-link link-next",href:"#next"}).append(a("<span>",{class:"pagination-tooltip tooltip-next"})))},this.container=e}createDefaultTemplate(){this.form.append(this.search),this.form.append(this.submit),this.wrapper.append(this.form),this.wrapper.append(this.list),this.container.append(this.wrapper)}addPagination(){const t=a("<ul>",{class:"pagination-container"}).append(this.pagination.start).append(this.pagination.previos).append(this.pagination.current).append(this.pagination.next);this.wrapper.append(t)}getRoot(){return this.container.get(0)}static createCards(t){const e=a("<li>",{class:"card-item-container"}),s=a("<img>",{class:"card-item-thumb",src:t.thumbnailUrl}),i=a("<a>",{class:"card-item-link",href:`https://www.youtube.com/watch?v=${t.videoId}`}).html(t.videoTitle),n=a("<p>",{class:"card-item-description"}).html(t.videoDescription),o=a("<p>",{class:"card-item-info"}).append(a("<div>",{class:"card-item-info-left"}).append(a("<i>",{class:"fa fa-user info-channel"})).append(a("<i>",{class:"fa fa-calendar info-upload-date"})).append(a("<i>",{class:"fa fa-eye info-views"}))).append(a("<div>",{class:"card-item-info-right"}).append(a("<a>",{class:"info-video-owner",href:`https://www.youtube.com/channel/${t.ownerId}`}).html(t.owner)).append(a("<span>",{class:"info-upload-date-text"}).html(t.uploaded)).append(a("<span>",{class:"info-views-count"}).html(t.views))),r=a("<p>",{class:"card-item-footer"}).append(a("<div>",{class:"card-item-footer-left"}).append(a("<i>",{class:"fa fa-thumbs-up footer-likes-icon"})).append(a("<span>",{class:"footer-likes"}).html(t.likes))).append(a("<div>",{class:"card-item-footer-right"}).append(a("<i>",{class:"fa fa-thumbs-down footer-dislikes-icon"})).append(a("<span>",{class:"footer-dislikes"}).html(t.dislikes)));return e.append(s).append(i).append(o).append(n).append(r),e}render(t){t&&t.length>0?t.forEach(t=>{this.list.append(r.createCards(t))}):this.createDefaultTemplate()}}window.addEventListener("load",()=>{const t=new r("body"),e=new n("AIzaSyCesqFP2y6G94GuYEbyFhAvywdnZjZZR94"),s=new o(e);new i(e,s,t).start()})}]);
//# sourceMappingURL=bundle.js.map